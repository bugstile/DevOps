name: Frontend CI

on:
  push:
    branches: [ main ]  # Kör ENDAST på pushes till main

jobs:
  build-and-test:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      # Extra: skriv ut info om körningen
      - name: Print run context
        run: |
          echo "Branch:  $GITHUB_REF_NAME"
          echo "Commit:  $GITHUB_SHA"
          echo "Actor:   $GITHUB_ACTOR"
          echo "Ref:     $GITHUB_REF"
          echo "Repo:    $GITHUB_REPOSITORY"

      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 18
          cache: npm

      - name: Install dependencies
        run: npm install

      - name: Run tests
        run: npm test

      - name: Build project
        run: npm run build
